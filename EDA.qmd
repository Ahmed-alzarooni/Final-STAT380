---
title: "Final-STAT380"
author: "Ahmed alzarooni{style='background-color: yellow;'}"
toc: true
title-block-banner: true
title-block-style: default
execute: 
  freeze: true
  cache: true
format:
  html: # comment this line to get pdf
  # pdf: 
    fig-width: 7
    fig-height: 7
---


---
#### Step 1: Load Necessary Libraries
First, ensure you have the necessary libraries. We'll use readxl to import Excel files and dplyr and ggplot2 for data manipulation and visualization.

We will need the following packages:


```{R, message=FALSE, warning=FALSE, results='hide'}
packages <- c(
  "readxl",
  "tibble",
  "dplyr", 
  "readr", 
  "tidyr", 
  "purrr", 
  "broom",
  "magrittr",
  "corrplot",
  "caret",
  "rpart",
  "rpart.plot",
  "e1071",
  "torch", 
  "luz"
)

#renv::install(packages)
sapply(packages,library, character.only=T)
```

<br><br><br><br>
---

#### Step 2: Read the Data and initial Data Cleaning
Use read_excel to load the data from the Excel files.Check for missing values and decide how to handle them, either by removing or imputing.


```{R}
years <- c("2000", "2003", "2006", "2009", "2012", "2015", "2018", "2021", "2024")

data_list <- list()

for (year in years) {
  df <- read_excel("LDC_data.xlsx", sheet = year)
  df$year <- year  # Add a new column 'year' to the dataframe
  data_list[[year]] <- df
}

energy_data <- read_excel("owid-energy-data.xlsx")

```

---

#### Step 3: Initial Data Examination
Check basic information about the datasets such as dimensions, column names, and a preview of the data.


```{R}
dim(data_list)
names(data_list)
head(data_list)

dim(energy_data)
names(energy_data)
head(energy_data)

```

---

#### Step 4: Data Cleaning
Check for missing values and decide how to handle them, either by removing or imputing.

```{R}
# Start with the first data frame
combined_data <- data_list[[1]]

# Sequentially join each subsequent data frame using full_join to keep all data
for (i in 2:length(data_list)) {
  combined_data <- full_join(combined_data, data_list[[i]], by = "year")
}
ldc_data <- combined_data
sum(is.na(ldc_data))
sum(is.na(energy_data))


```



---

#### Step 5: Summary Statistics
Get a statistical summary of the datasets to understand the distribution of data.

```{R}
summary(ldc_data)
summary(energy_data)

```


#### Step 6: Visualization
######Example 1: Histograms of a Numeric Variable

```{R}
ggplot(energy_data, aes(x = gdp)) +
  geom_histogram(bins = 30, fill = "blue", color = "black") +
  labs(title = "Distribution of GDP Per Capita", x = "GDP Per Capita", y = "Frequency")

```

###### Example 2: Line Plot

```{R}
ggplot(energy_data, aes(x = fossil_fuel_consumption, y = gas_consumption)) +
  geom_line() +
  labs(title = "fossil fuel in relation to gas", x = "fossil_fuel_consumption", y = "gas_consumption")
```

---






---




:::{.hidden unless-format="pdf"}
\pagebreak
:::

<br><br><br><br>
<br><br><br><br>
---



::: {.callout-note collapse="true"}
## Session Information

Print your `R` session information using the following command

```{R}
sessionInfo()
```
:::